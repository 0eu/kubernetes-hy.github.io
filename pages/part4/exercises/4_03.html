<div class="exercise" markdown="1"> 
  <h1>Exercise 4.03: Prometheus</h1>

  We've been using Prometheus since part 2, but basically we've only heard the name and seen some nice graphs on Grafana. Let's do a single hands-on query to learn more.

  Start a Prometheus with helm (see part 2) and use port-forward to access the gui website. Port 9090 is the default for Prometheus:

```console
$ kubectl -n prometheus get pods
 NAME                                                              READY   STATUS    RESTARTS   AGE
 kube-prometheus-stack-1602-operator-557c9c4f5-wbsqc               2/2     Running   0          17h
 kube-prometheus-stack-1602180058-prometheus-node-exporter-tr7ns   1/1     Running   0          17h
 kube-prometheus-stack-1602180058-grafana-59cd48d794-4459m         2/2     Running   0          17h
 prometheus-kube-prometheus-stack-1602-prometheus-0                3/3     Running   1          17h
 kube-prometheus-stack-1602180058-prometheus-node-exporter-ft7dg   1/1     Running   0          17h
 kube-prometheus-stack-1602180058-prometheus-node-exporter-nt8cp   1/1     Running   0          17h
 kube-prometheus-stack-1602180058-kube-state-metrics-55dccdkkz6w   1/1     Running   0          17h
 alertmanager-kube-prometheus-stack-1602-alertmanager-0            2/2     Running   0          17h

$ kubectl -n prometheus port-forward prometheus-kube-prometheus-stack-1602-prometheus-0 9090:9090 
  Forwarding from 127.0.0.1:9090 -> 9090
  Forwarding from [::1]:9090 -> 9090
```

  And now accessing [http://localhost:9090](http://localhost:9090) will allow us to write queries. **Write a query** that shows the number of pods created by StatefulSets in "prometheus" namespace. For the above setup the "Value" should be 2 different pods. Something similar:

  <table>
    <thead>
      <tr><td>Element</td><td>Value</td></tr>
    </thead>
    <tbody>
      <tr><td>Scalar</td><td>2</td></tr>
    </tbody>
  </table>

  Query for "kube_pod_info" should have the required fields to filter through. See [documentation](https://prometheus.io/docs/prometheus/latest/querying/basics/) for help with querying.
</div>
